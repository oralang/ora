// Expected failure: direct write to a locked storage mapping slot via assignment expression in return.

contract FailLockDirectWriteSameSlotExprReturn {
    storage var balances: map<address, u256>;

    pub fn bad(user: address, amount: u256) -> u256 {
        @lock(balances[user]);
        return balances[user] = amount;
    }
}
